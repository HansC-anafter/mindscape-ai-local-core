# Persona Alignment Check

## Purpose

Check content alignment with brand persona definition (MI + BI). This playbook is essential for content pipelines to ensure all generated content maintains brand consistency.

## When to Use

- Before publishing any content generated by AI
- During content review workflows
- For batch validation of existing content
- As a quality gate in content pipelines

## Inputs

- **content** (required): Content text to check
- **brand_identity_ref** (required): Brand CIS reference containing MI and BI
- **content_type** (optional): Type of content (general, social_post, blog, landing_page, email)
- **check_options** (optional):
  - `strict_mode`: Red line violations immediately fail check (default: true)
  - `threshold`: Pass threshold 0-1 (default: 0.7)
  - `check_dimensions`: Dimensions to check

## Check Dimensions

1. **tone_of_voice**: Match with brand tone definition
2. **personality_traits**: Expression of brand personality
3. **never_do**: Red line (things the brand never does) check
4. **communication_style**: Match with BI communication style
5. **worldview**: Expression of brand worldview

## Process

1. **Load Brand Identity**: Retrieve MI and BI from brand_identity_ref
2. **Multi-dimensional Check**: Evaluate each dimension
3. **Red Line Detection**: Check for never_do violations
4. **Score Calculation**: Compute overall alignment score
5. **Generate Report**: Return detailed check result

## Outputs

- **overall_score**: 0-1 overall alignment score
- **is_aligned**: Whether content passes alignment check
- **dimensions**: Per-dimension scores and suggestions
- **red_line_violations**: List of red line violations (if any)
- **tone_match**: Tone matching score
- **personality_match**: Personality matching score

## Example Usage

```yaml
inputs:
  content: "Our innovative AI solution helps enterprises..."
  brand_identity_ref:
    artifact_type: "brand_identity"
    artifact_id: "cis_acme_corp"
  content_type: "landing_page"
  check_options:
    strict_mode: true
    threshold: 0.75
```

## Integration Points

- **Content Pipeline**: Use as quality gate before content output
- **analysis.ana_persona_alignment**: Cross-pack integration for content intelligence
- **ig.content_factory**: IG content production line integration

## Related Playbooks

- `cis_mind_identity`: Define brand MI
- `cis_behavior_identity`: Define brand BI
- `cis_apply_content`: Generate content based on CIS
