{
  "version": "1.0",
  "playbook_code": "daily_planning",
  "kind": "user_workflow",
  "steps": [
    {
      "id": "collect_tasks",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "{{input.user_request}}\n\n{{input.context}}\n\nCollect tasks. Ask user about today's/week's to-do items, understand task urgency and importance, and collect relevant background information about tasks.",
        "schema_description": "A JSON object with the following properties: 1) tasks: array of objects, each with task_name (string), description (string), urgency (string: 'high', 'medium', 'low'), importance (string: 'high', 'medium', 'low'), and background_info (string). 2) time_context: object with planning_period (string: 'daily' or 'weekly'), available_time (string), and constraints (array of strings). 3) related_intents: array of strings (related active intents if any)."
      },
      "outputs": {
        "tasks": "extracted_data.tasks",
        "time_context": "extracted_data.time_context",
        "related_intents": "extracted_data.related_intents"
      }
    },
    {
      "id": "prioritize_tasks",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Tasks: {{step.collect_tasks.tasks}}\n\nTime Context: {{step.collect_tasks.time_context}}\n\nPrioritize tasks. Use priority matrix (urgent/important) for classification, consider user's work rhythm and schedule, and provide suggested execution order.",
        "schema_description": "A JSON object with the following properties: 1) prioritized_tasks: array of objects, each with task_name (string), priority_level (string: 'high', 'medium', 'low'), priority_matrix (object with urgent and important booleans), suggested_order (integer), and reasoning (string). 2) priority_categories: object with urgent_important (array of task names), not_urgent_important (array of task names), urgent_not_important (array of task names), and not_urgent_not_important (array of task names). 3) execution_sequence: array of task names in suggested order."
      },
      "outputs": {
        "prioritized_tasks": "extracted_data.prioritized_tasks",
        "priority_categories": "extracted_data.priority_categories",
        "execution_sequence": "extracted_data.execution_sequence"
      },
      "depends_on": ["collect_tasks"]
    },
    {
      "id": "generate_actionable_list",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Prioritized Tasks: {{step.prioritize_tasks.prioritized_tasks}}\n\nExecution Sequence: {{step.prioritize_tasks.execution_sequence}}\n\nGenerate actionable list. Break down tasks into specific action steps, set time estimates for each task, and provide execution suggestions and notes.",
        "schema_description": "A JSON object with the following properties: 1) actionable_list: array of objects, each with task_name (string), action_steps (array of strings), estimated_time (string), priority (string), dependencies (array of strings), and notes (string). 2) time_estimates: object with total_estimated_time (string), high_priority_time (string), medium_priority_time (string), and low_priority_time (string). 3) execution_suggestions: array of objects, each with suggestion (string), reason (string), and priority (string). 4) next_actions: array of strings (immediate next steps)."
      },
      "outputs": {
        "actionable_list": "extracted_data.actionable_list",
        "time_estimates": "extracted_data.time_estimates",
        "execution_suggestions": "extracted_data.execution_suggestions",
        "next_actions": "extracted_data.next_actions"
      },
      "depends_on": ["prioritize_tasks"]
    }
  ],
  "inputs": {
    "user_request": {
      "type": "string",
      "required": true,
      "description": "User's request for daily/weekly planning"
    },
    "context": {
      "type": "string",
      "default": "",
      "description": "Additional context about tasks or schedule"
    }
  },
  "outputs": {
    "tasks": {
      "type": "list[object]",
      "description": "Collected tasks with urgency and importance",
      "source": "step.collect_tasks.tasks"
    },
    "time_context": {
      "type": "object",
      "description": "Time context for planning",
      "source": "step.collect_tasks.time_context"
    },
    "related_intents": {
      "type": "list[string]",
      "description": "Related active intents",
      "source": "step.collect_tasks.related_intents"
    },
    "prioritized_tasks": {
      "type": "list[object]",
      "description": "Tasks with priority levels and order",
      "source": "step.prioritize_tasks.prioritized_tasks"
    },
    "priority_categories": {
      "type": "object",
      "description": "Tasks categorized by priority matrix",
      "source": "step.prioritize_tasks.priority_categories"
    },
    "execution_sequence": {
      "type": "list[string]",
      "description": "Suggested execution sequence",
      "source": "step.prioritize_tasks.execution_sequence"
    },
    "actionable_list": {
      "type": "list[object]",
      "description": "Actionable task list with steps and time estimates",
      "source": "step.generate_actionable_list.actionable_list"
    },
    "time_estimates": {
      "type": "object",
      "description": "Time estimates breakdown",
      "source": "step.generate_actionable_list.time_estimates"
    },
    "execution_suggestions": {
      "type": "list[object]",
      "description": "Execution suggestions and notes",
      "source": "step.generate_actionable_list.execution_suggestions"
    },
    "next_actions": {
      "type": "list[string]",
      "description": "Immediate next actions",
      "source": "step.generate_actionable_list.next_actions"
    }
  }
}

