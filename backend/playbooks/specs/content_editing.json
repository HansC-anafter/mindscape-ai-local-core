{
  "version": "1.0",
  "playbook_code": "content_editing",
  "kind": "user_workflow",
  "steps": [
    {
      "id": "analyze_content_structure_logic",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "{{input.user_request}}\n\n{{input.context}}\n\n{{input.content}}\n\nAnalyze content structure and logic. Extract text from content files or receive text input, analyze overall content structure and organization, check logical flow and coherence, identify structural issues (missing sections, unclear transitions), and evaluate content hierarchy and organization.",
        "schema_description": "A JSON object with the following properties: 1) content_structure: object with sections (array of section objects, each with section_name, content_preview, position), hierarchy (object with heading_structure), and organization_score (string: 'high', 'medium', 'low'). 2) logical_flow: object with flow_assessment (string: 'good', 'fair', 'poor'), transitions (array of transition objects), coherence_score (string: 'high', 'medium', 'low'), and flow_issues (array of strings). 3) structural_issues: array of objects, each with issue_type (string: 'missing_section', 'unclear_transition', 'poor_organization', 'hierarchy_issue'), description (string), location (string), and severity (string: 'high', 'medium', 'low'). 4) hierarchy_evaluation: object with current_hierarchy (object), issues (array of strings), and recommendations (array of strings)."
      },
      "outputs": {
        "content_structure": "extracted_data.content_structure",
        "logical_flow": "extracted_data.logical_flow",
        "structural_issues": "extracted_data.structural_issues",
        "hierarchy_evaluation": "extracted_data.hierarchy_evaluation"
      }
    },
    {
      "id": "check_tone_style_consistency",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Content: {{input.content}}\n\nContent Structure: {{step.analyze_content_structure_logic.content_structure}}\n\nCheck tone and style consistency. Analyze tone throughout the content, check style consistency (formal vs. informal, technical vs. accessible), identify tone shifts or inconsistencies, verify alignment with target audience, and check for brand voice compliance.",
        "schema_description": "A JSON object with the following properties: 1) tone_analysis: object with overall_tone (string), tone_consistency (string: 'high', 'medium', 'low'), tone_shifts (array of objects, each with location, shift_type, and description), and target_audience_alignment (string: 'high', 'medium', 'low'). 2) style_consistency: object with style_type (string: 'formal', 'informal', 'technical', 'accessible', 'mixed'), consistency_score (string: 'high', 'medium', 'low'), inconsistencies (array of objects, each with location, issue, and description), and style_guidelines_compliance (string). 3) brand_voice_check: object with brand_voice_alignment (string: 'high', 'medium', 'low'), violations (array of objects, each with violation_type, location, and description), and recommendations (array of strings)."
      },
      "outputs": {
        "tone_analysis": "extracted_data.tone_analysis",
        "style_consistency": "extracted_data.style_consistency",
        "brand_voice_check": "extracted_data.brand_voice_check"
      },
      "depends_on": ["analyze_content_structure_logic"]
    },
    {
      "id": "optimize_readability",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Content: {{input.content}}\n\nContent Structure: {{step.analyze_content_structure_logic.content_structure}}\n\nOptimize readability. Analyze sentence length and complexity, check paragraph structure and length, improve clarity and conciseness, enhance flow and transitions, and optimize vocabulary for target audience.",
        "schema_description": "A JSON object with the following properties: 1) sentence_analysis: object with avg_sentence_length (number), complex_sentences_count (integer), readability_impact (string), and recommendations (array of strings). 2) paragraph_analysis: object with avg_paragraph_length (number), structure_assessment (string: 'good', 'fair', 'poor'), issues (array of strings), and recommendations (array of strings). 3) clarity_improvements: array of objects, each with original_text (string), improved_text (string), improvement_type (string), and rationale (string). 4) flow_enhancements: array of objects, each with section (string), current_issue (string), enhancement (string), and expected_impact (string). 5) vocabulary_optimization: object with current_level (string), target_level (string), technical_terms_count (integer), and optimization_recommendations (array of strings)."
      },
      "outputs": {
        "sentence_analysis": "extracted_data.sentence_analysis",
        "paragraph_analysis": "extracted_data.paragraph_analysis",
        "clarity_improvements": "extracted_data.clarity_improvements",
        "flow_enhancements": "extracted_data.flow_enhancements",
        "vocabulary_optimization": "extracted_data.vocabulary_optimization"
      },
      "depends_on": ["analyze_content_structure_logic"]
    },
    {
      "id": "check_brand_guidelines",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Content: {{input.content}}\n\nBrand Guidelines: {{input.brand_guidelines}}\n\nTone Analysis: {{step.check_tone_style_consistency.tone_analysis}}\n\nCheck brand guidelines. Review content against brand guidelines (if provided), check terminology and naming conventions, verify brand voice and messaging alignment, ensure compliance with style guide, and identify any brand guideline violations.",
        "schema_description": "A JSON object with the following properties: 1) brand_guidelines_review: object with compliance_score (string: 'high', 'medium', 'low'), guidelines_applied (array of strings), and compliance_summary (string). 2) terminology_check: object with approved_terms (array of strings), non_compliant_terms (array of objects, each with term, location, and recommended_replacement), and naming_conventions_compliance (string: 'high', 'medium', 'low'). 3) brand_voice_verification: object with voice_alignment (string: 'high', 'medium', 'low'), messaging_alignment (string: 'high', 'medium', 'low'), and alignment_issues (array of strings). 4) style_guide_compliance: object with compliance_level (string: 'high', 'medium', 'low'), violations (array of objects, each with violation_type, location, and description), and recommendations (array of strings)."
      },
      "outputs": {
        "brand_guidelines_review": "extracted_data.brand_guidelines_review",
        "terminology_check": "extracted_data.terminology_check",
        "brand_voice_verification": "extracted_data.brand_voice_verification",
        "style_guide_compliance": "extracted_data.style_guide_compliance"
      },
      "depends_on": ["check_tone_style_consistency"]
    },
    {
      "id": "generate_editing_suggestions",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Structural Issues: {{step.analyze_content_structure_logic.structural_issues}}\n\nTone Issues: {{step.check_tone_style_consistency.tone_analysis}}\n\nReadability Improvements: {{step.optimize_readability.clarity_improvements}}\n\nBrand Guidelines: {{step.check_brand_guidelines.brand_guidelines_review}}\n\nGenerate editing suggestions. Compile all analysis findings, generate prioritized editing suggestions, create optimized version of content, provide before/after comparisons for key changes, and generate editing checklist.",
        "schema_description": "A JSON object with the following properties: 1) prioritized_suggestions: array of objects, each with suggestion (string), category (string: 'structure', 'tone', 'readability', 'brand'), priority (string: 'high', 'medium', 'low'), location (string), and rationale (string). 2) optimized_content: object with sections (array of section objects with optimized_content), overall_improvements (array of strings), and version_comparison (string). 3) before_after_comparisons: array of objects, each with section (string), before (string), after (string), change_type (string), and impact (string). 4) editing_checklist: array of objects, each with task (string), category (string), priority (string: 'high', 'medium', 'low'), status (string: 'pending', 'in_progress', 'completed'), and notes (string). 5) editing_summary: object with total_suggestions (integer), high_priority_count (integer), medium_priority_count (integer), low_priority_count (integer), and overall_quality_improvement (string: 'high', 'medium', 'low')."
      },
      "outputs": {
        "prioritized_suggestions": "extracted_data.prioritized_suggestions",
        "optimized_content": "extracted_data.optimized_content",
        "before_after_comparisons": "extracted_data.before_after_comparisons",
        "editing_checklist": "extracted_data.editing_checklist",
        "editing_summary": "extracted_data.editing_summary"
      },
      "depends_on": ["check_brand_guidelines", "optimize_readability"]
    }
  ],
  "inputs": {
    "user_request": {
      "type": "string",
      "required": true,
      "description": "User's request for content editing"
    },
    "context": {
      "type": "string",
      "default": "",
      "description": "Additional context about the content or editing requirements"
    },
    "content": {
      "type": "string",
      "required": true,
      "description": "Content to edit"
    },
    "brand_guidelines": {
      "type": "string",
      "default": "",
      "description": "Brand guidelines to check against"
    }
  },
  "outputs": {
    "content_structure": {
      "type": "object",
      "description": "Content structure analysis",
      "source": "step.analyze_content_structure_logic.content_structure"
    },
    "logical_flow": {
      "type": "object",
      "description": "Logical flow assessment",
      "source": "step.analyze_content_structure_logic.logical_flow"
    },
    "structural_issues": {
      "type": "list[object]",
      "description": "Structural issues identified",
      "source": "step.analyze_content_structure_logic.structural_issues"
    },
    "hierarchy_evaluation": {
      "type": "object",
      "description": "Content hierarchy evaluation",
      "source": "step.analyze_content_structure_logic.hierarchy_evaluation"
    },
    "tone_analysis": {
      "type": "object",
      "description": "Tone analysis throughout content",
      "source": "step.check_tone_style_consistency.tone_analysis"
    },
    "style_consistency": {
      "type": "object",
      "description": "Style consistency check",
      "source": "step.check_tone_style_consistency.style_consistency"
    },
    "brand_voice_check": {
      "type": "object",
      "description": "Brand voice compliance check",
      "source": "step.check_tone_style_consistency.brand_voice_check"
    },
    "sentence_analysis": {
      "type": "object",
      "description": "Sentence length and complexity analysis",
      "source": "step.optimize_readability.sentence_analysis"
    },
    "paragraph_analysis": {
      "type": "object",
      "description": "Paragraph structure analysis",
      "source": "step.optimize_readability.paragraph_analysis"
    },
    "clarity_improvements": {
      "type": "list[object]",
      "description": "Clarity improvement suggestions",
      "source": "step.optimize_readability.clarity_improvements"
    },
    "flow_enhancements": {
      "type": "list[object]",
      "description": "Flow enhancement recommendations",
      "source": "step.optimize_readability.flow_enhancements"
    },
    "vocabulary_optimization": {
      "type": "object",
      "description": "Vocabulary optimization recommendations",
      "source": "step.optimize_readability.vocabulary_optimization"
    },
    "brand_guidelines_review": {
      "type": "object",
      "description": "Brand guidelines compliance review",
      "source": "step.check_brand_guidelines.brand_guidelines_review"
    },
    "terminology_check": {
      "type": "object",
      "description": "Terminology and naming conventions check",
      "source": "step.check_brand_guidelines.terminology_check"
    },
    "brand_voice_verification": {
      "type": "object",
      "description": "Brand voice and messaging verification",
      "source": "step.check_brand_guidelines.brand_voice_verification"
    },
    "style_guide_compliance": {
      "type": "object",
      "description": "Style guide compliance check",
      "source": "step.check_brand_guidelines.style_guide_compliance"
    },
    "prioritized_suggestions": {
      "type": "list[object]",
      "description": "Prioritized editing suggestions",
      "source": "step.generate_editing_suggestions.prioritized_suggestions"
    },
    "optimized_content": {
      "type": "object",
      "description": "Optimized version of content",
      "source": "step.generate_editing_suggestions.optimized_content"
    },
    "before_after_comparisons": {
      "type": "list[object]",
      "description": "Before/after comparisons for key changes",
      "source": "step.generate_editing_suggestions.before_after_comparisons"
    },
    "editing_checklist": {
      "type": "list[object]",
      "description": "Editing checklist",
      "source": "step.generate_editing_suggestions.editing_checklist"
    },
    "editing_summary": {
      "type": "object",
      "description": "Editing summary and statistics",
      "source": "step.generate_editing_suggestions.editing_summary"
    }
  }
}

