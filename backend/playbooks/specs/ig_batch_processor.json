{
  "version": "1.0.0",
  "playbook_code": "ig_batch_processor",
  "kind": "user_workflow",
  "description": "Manage batch processing of multiple posts including validation, generation, and export operations",
  "steps": [
    {
      "id": "batch_validate",
      "tool": "ig_batch_processor_tool",
      "inputs": {
        "action": "batch_validate",
        "workspace_id": "{{input.workspace_id}}",
        "workspace_path": "{{input.workspace_path}}",
        "post_paths": "{{input.post_paths}}",
        "strict_mode": "{{input.strict_mode}}"
      },
      "outputs": {
        "result": "result"
      },
      "condition": "{{input.action == 'batch_validate'}}"
    },
    {
      "id": "batch_generate_export_packs",
      "tool": "ig_batch_processor_tool",
      "inputs": {
        "action": "batch_generate_export_packs",
        "workspace_id": "{{input.workspace_id}}",
        "workspace_path": "{{input.workspace_path}}",
        "post_paths": "{{input.post_paths}}",
        "output_folder": "{{input.output_folder}}"
      },
      "outputs": {
        "result": "result"
      },
      "condition": "{{input.action == 'batch_generate_export_packs'}}"
    },
    {
      "id": "batch_update_status",
      "tool": "ig_batch_processor_tool",
      "inputs": {
        "action": "batch_update_status",
        "workspace_id": "{{input.workspace_id}}",
        "workspace_path": "{{input.workspace_path}}",
        "post_paths": "{{input.post_paths}}",
        "new_status": "{{input.new_status}}"
      },
      "outputs": {
        "result": "result"
      },
      "condition": "{{input.action == 'batch_update_status'}}"
    },
    {
      "id": "batch_process",
      "tool": "ig_batch_processor_tool",
      "inputs": {
        "action": "batch_process",
        "workspace_id": "{{input.workspace_id}}",
        "workspace_path": "{{input.workspace_path}}",
        "post_paths": "{{input.post_paths}}",
        "operations": "{{input.operations}}",
        "operation_config": "{{input.operation_config}}"
      },
      "outputs": {
        "result": "result"
      },
      "condition": "{{input.action == 'batch_process'}}"
    }
  ],
  "inputs": {
    "action": {
      "type": "string",
      "enum": ["batch_validate", "batch_generate_export_packs", "batch_update_status", "batch_process"],
      "required": true,
      "description": "Action to perform"
    },
    "workspace_id": {
      "type": "string",
      "required": false,
      "description": "Workspace identifier"
    },
    "workspace_path": {
      "type": "string",
      "required": false,
      "description": "Custom workspace path (for backward compatibility/migration, not allowed in enterprise mode)"
    },
    "post_paths": {
      "type": "array",
      "items": {"type": "string"},
      "required": true,
      "description": "List of post file paths (relative to workspace or Obsidian-style)"
    },
    "strict_mode": {
      "type": "boolean",
      "required": false,
      "description": "If True, all required fields must be present (default: false)"
    },
    "output_folder": {
      "type": "string",
      "required": false,
      "description": "Output folder for export packs"
    },
    "new_status": {
      "type": "string",
      "required": false,
      "description": "New status to set (required for batch_update_status action)"
    },
    "operations": {
      "type": "array",
      "items": {"type": "string"},
      "required": false,
      "description": "List of operations to perform (required for batch_process action)"
    },
    "operation_config": {
      "type": "object",
      "required": false,
      "description": "Configuration for operations"
    }
  },
  "outputs": {
    "result": {
      "type": "object",
      "description": "Batch processing results",
      "source": "step.batch_validate.result or step.batch_generate_export_packs.result or step.batch_update_status.result or step.batch_process.result"
    }
  }
}





