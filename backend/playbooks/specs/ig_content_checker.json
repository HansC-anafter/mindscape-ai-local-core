{
  "version": "1.0.0",
  "playbook_code": "ig_content_checker",
  "kind": "user_workflow",
  "description": "Check IG Post content for compliance issues including medical/investment claims, copyright, personal data, and brand tone",
  "steps": [
    {
      "id": "read_post",
      "tool": "obsidian_read_note",
      "inputs": {
        "vault_path": "{{input.vault_path}}",
        "note_path": "{{input.post_path}}"
      },
      "outputs": {
        "post_content": "result.content",
        "frontmatter": "result.frontmatter"
      },
      "condition": "{{input.post_path and input.vault_path and not input.content}}"
    },
    {
      "id": "check_content",
      "tool": "ig_content_checker_tool",
      "inputs": {
        "content": "{{step.read_post.post_content or input.content}}",
        "frontmatter": "{{step.read_post.frontmatter or input.frontmatter}}",
        "vault_path": "{{input.vault_path}}",
        "post_path": "{{input.post_path}}"
      },
      "outputs": {
        "risk_flags": "result.risk_flags",
        "warnings": "result.warnings",
        "checks": "result.checks",
        "is_safe": "result.is_safe"
      },
      "depends_on": ["read_post"],
      "condition": "{{step.read_post.post_content or input.content}}"
    }
  ],
  "inputs": {
    "content": {
      "type": "string",
      "required": false,
      "description": "Post content text to check (optional if post_path provided)"
    },
    "post_path": {
      "type": "string",
      "required": false,
      "description": "Path to post Markdown file (relative to vault, optional if content provided)"
    },
    "vault_path": {
      "type": "string",
      "required": false,
      "description": "Path to Obsidian Vault (required if post_path provided)"
    },
    "frontmatter": {
      "type": "object",
      "required": false,
      "description": "Post frontmatter (optional)"
    }
  },
  "outputs": {
    "risk_flags": {
      "type": "list[string]",
      "description": "Risk flags found (醫療, 投資, 侵權, 個資)",
      "source": "step.check_content.risk_flags"
    },
    "warnings": {
      "type": "list[string]",
      "description": "List of warnings",
      "source": "step.check_content.warnings"
    },
    "checks": {
      "type": "object",
      "description": "Detailed check results",
      "source": "step.check_content.checks"
    },
    "is_safe": {
      "type": "boolean",
      "description": "Whether content is safe (no risk flags)",
      "source": "step.check_content.is_safe"
    }
  }
}


