{
  "version": "1.0",
  "playbook_code": "yt_script_generation",
  "kind": "user_workflow",
  "steps": [
    {
      "id": "extract_topics",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "{{input.source_content}}",
        "schema_description": "A JSON object with two properties: 1) topics: array of strings (key topics extracted from the content for video script generation). 2) key_points: array of strings (key points to cover in the video)."
      },
      "outputs": {
        "topics": "extracted_data.topics",
        "key_points": "extracted_data.key_points"
      }
    },
    {
      "id": "generate_script",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Source content: {{input.source_content}}\n\nExtracted topics: {{step.extract_topics.topics}}\n\nKey points: {{step.extract_topics.key_points}}\n\nGenerate a {{input.duration_minutes}}-minute YouTube video script. Script type: {{input.script_type}}, Tone: {{input.tone}}. Include timestamps: {{input.include_timestamps}}",
        "schema_description": "A JSON object with the following structure: 1) title: string (Video title). 2) duration_minutes: integer. 3) script_type: string (Type of script, e.g., 'educational', 'tutorial', 'review', 'storytelling', 'interview'). 4) tone: string (Tone style, e.g., 'engaging', 'professional', 'casual', 'energetic', 'calm'). 5) intro: object with properties start_time (string), end_time (string), content (string), hook (string). 6) main_content: array of objects, each with section_number (integer), title (string), start_time (string), end_time (string), content (string), key_points (array of strings). 7) outro: object with properties start_time (string), end_time (string), content (string), cta (string)."
      },
      "outputs": {
        "script": "extracted_data"
      },
      "depends_on": ["extract_topics"]
    },
    {
      "id": "format_markdown",
      "tool": "core_llm.generate",
      "inputs": {
        "prompt": "Convert the following YouTube video script JSON into a well-formatted Markdown document:\n\n{{step.generate_script.script}}\n\nFormat it as a markdown document with proper headings, sections, and timestamps."
      },
      "outputs": {
        "script_markdown": "text"
      },
      "depends_on": ["generate_script"]
    }
  ],
  "inputs": {
    "source_content": {
      "type": "string",
      "required": true,
      "description": "Source content to generate script from"
    },
    "duration_minutes": {
      "type": "integer",
      "default": 5,
      "description": "Video duration in minutes"
    },
    "script_type": {
      "type": "string",
      "default": "educational",
      "enum": ["educational", "tutorial", "review", "storytelling", "interview"],
      "description": "Script type"
    },
    "tone": {
      "type": "string",
      "default": "engaging",
      "enum": ["engaging", "professional", "casual", "energetic", "calm"],
      "description": "Tone style"
    },
    "include_timestamps": {
      "type": "boolean",
      "default": true,
      "description": "Include timestamp annotations"
    }
  },
  "outputs": {
    "script": {
      "type": "object",
      "description": "Complete video script",
      "source": "step.generate_script.script"
    },
    "topics": {
      "type": "list[string]",
      "description": "Extracted key topics",
      "source": "step.extract_topics.topics"
    },
    "key_points": {
      "type": "list[string]",
      "description": "Key points to cover",
      "source": "step.extract_topics.key_points"
    },
    "script_markdown": {
      "type": "string",
      "description": "Markdown format script",
      "source": "step.format_markdown.script_markdown"
    }
  }
}

