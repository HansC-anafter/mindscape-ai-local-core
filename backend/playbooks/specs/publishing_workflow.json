{
  "version": "1.0",
  "playbook_code": "publishing_workflow",
  "kind": "user_workflow",
  "steps": [
    {
      "id": "check_content_completeness",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "{{input.user_request}}\n\n{{input.context}}\n\n{{input.content}}\n\nCheck content completeness. Verify all required content sections are present, check for missing information or placeholders, ensure all media assets are available and properly referenced, validate content structure and organization, and confirm all links and references are valid.",
        "schema_description": "A JSON object with the following properties: 1) content_sections: array of objects, each with section_name (string), status (string: 'complete', 'incomplete', 'missing'), required (boolean), content_preview (string), and issues (array of strings). 2) missing_information: array of objects, each with item (string), location (string), type (string: 'placeholder', 'missing', 'incomplete'), and required (boolean). 3) media_assets: array of objects, each with asset_name (string), type (string: 'image', 'video', 'audio', 'document'), status (string: 'available', 'missing', 'broken_link'), location (string), and validation (string). 4) content_structure: object with structure_valid (boolean), organization_score (string: 'high', 'medium', 'low'), issues (array of strings), and recommendations (array of strings). 5) links_references: array of objects, each with link_text (string), url (string), status (string: 'valid', 'broken', 'unknown'), and type (string: 'internal', 'external')."
      },
      "outputs": {
        "content_sections": "extracted_data.content_sections",
        "missing_information": "extracted_data.missing_information",
        "media_assets": "extracted_data.media_assets",
        "content_structure": "extracted_data.content_structure",
        "links_references": "extracted_data.links_references"
      }
    },
    {
      "id": "validate_format_guidelines",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Content: {{input.content}}\n\nContent Structure: {{step.check_content_completeness.content_structure}}\n\nValidate format and guidelines. Check content format compliance (Markdown, HTML, etc.), verify adherence to style guide and brand guidelines, validate metadata (title, description, tags, categories), check image formats and sizes, and ensure accessibility requirements are met.",
        "schema_description": "A JSON object with the following properties: 1) format_compliance: object with format_type (string), compliance_score (string: 'high', 'medium', 'low'), issues (array of strings), and recommendations (array of strings). 2) style_guide_compliance: object with compliance_score (string: 'high', 'medium', 'low'), violations (array of violation objects), and recommendations (array of strings). 3) brand_guidelines_compliance: object with compliance_score (string: 'high', 'medium', 'low'), violations (array of violation objects), and recommendations (array of strings). 4) metadata_validation: object with title (object with status, value, issues), description (object with status, value, issues), tags (array of tag objects), categories (array of category objects), and validation_score (string). 5) image_validation: array of objects, each with image_name (string), format (string), size (string), dimensions (string), alt_text (string), and validation_status (string: 'valid', 'needs_optimization', 'invalid'). 6) accessibility_check: object with compliance_score (string: 'high', 'medium', 'low'), issues (array of strings), and recommendations (array of strings)."
      },
      "outputs": {
        "format_compliance": "extracted_data.format_compliance",
        "style_guide_compliance": "extracted_data.style_guide_compliance",
        "brand_guidelines_compliance": "extracted_data.brand_guidelines_compliance",
        "metadata_validation": "extracted_data.metadata_validation",
        "image_validation": "extracted_data.image_validation",
        "accessibility_check": "extracted_data.accessibility_check"
      },
      "depends_on": ["check_content_completeness"]
    },
    {
      "id": "generate_publishing_checklist",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Content Completeness: {{step.check_content_completeness.content_sections}}\n\nFormat Validation: {{step.validate_format_guidelines.format_compliance}}\n\nGenerate publishing checklist. Create comprehensive pre-publishing checklist, list all required elements and validations, prioritize checklist items by importance, include platform-specific requirements, and provide completion status for each item.",
        "schema_description": "A JSON object with the following properties: 1) publishing_checklist: array of objects, each with item_id (string), item (string), category (string: 'content', 'format', 'metadata', 'media', 'accessibility', 'platform'), priority (string: 'critical', 'high', 'medium', 'low'), status (string: 'pending', 'in_progress', 'completed', 'not_applicable'), and notes (string). 2) required_elements: array of objects, each with element (string), required (boolean), status (string), and validation_method (string). 3) platform_requirements: array of objects, each with platform (string), requirements (array of requirement objects), and compliance_status (string). 4) checklist_summary: object with total_items (integer), completed_items (integer), pending_items (integer), critical_pending (integer), and completion_percentage (number)."
      },
      "outputs": {
        "publishing_checklist": "extracted_data.publishing_checklist",
        "required_elements": "extracted_data.required_elements",
        "platform_requirements": "extracted_data.platform_requirements",
        "checklist_summary": "extracted_data.checklist_summary"
      },
      "depends_on": ["validate_format_guidelines"]
    },
    {
      "id": "prepare_publishing_notes",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Content: {{input.content}}\n\nMetadata: {{step.validate_format_guidelines.metadata_validation}}\n\nPrepare publishing notes. Generate publishing notes and changelog, prepare release notes or update descriptions, create social media announcement drafts, prepare email notifications (if applicable), and document any special considerations or warnings.",
        "schema_description": "A JSON object with the following properties: 1) publishing_notes: object with notes (string), changelog (array of change objects), and special_considerations (array of strings). 2) release_notes: array of objects, each with version (string), release_date (string), description (string), key_changes (array of strings), and highlights (array of strings). 3) social_media_drafts: array of objects, each with platform (string: 'twitter', 'facebook', 'linkedin', 'instagram'), draft_text (string), hashtags (array of strings), and media_suggestions (array of strings). 4) email_notifications: array of objects, each with recipient_type (string), subject (string), body_draft (string), and send_timing (string). 5) special_considerations: array of objects, each with consideration (string), type (string: 'warning', 'note', 'reminder'), and action_required (string)."
      },
      "outputs": {
        "publishing_notes": "extracted_data.publishing_notes",
        "release_notes": "extracted_data.release_notes",
        "social_media_drafts": "extracted_data.social_media_drafts",
        "email_notifications": "extracted_data.email_notifications",
        "special_considerations": "extracted_data.special_considerations"
      },
      "depends_on": ["validate_format_guidelines"]
    },
    {
      "id": "plan_publishing_schedule",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Content: {{input.content}}\n\nPublishing Checklist: {{step.generate_publishing_checklist.checklist_summary}}\n\nPlan publishing schedule. Determine optimal publishing time based on audience, consider time zones and peak engagement times, plan content sequencing if multiple pieces, set up scheduling and reminders, and coordinate with other content or campaigns.",
        "schema_description": "A JSON object with the following properties: 1) optimal_publishing_time: object with recommended_time (string), timezone (string), reasoning (string), and alternative_times (array of time objects). 2) audience_analysis: object with target_audience (string), peak_engagement_times (array of time objects), timezone_considerations (array of strings), and recommendations (array of strings). 3) content_sequencing: array of objects, each with content_piece (string), sequence_order (integer), publish_time (string), dependencies (array of strings), and rationale (string). 4) scheduling_plan: object with primary_schedule (object with date, time, timezone), backup_schedules (array of schedule objects), reminders (array of reminder objects), and coordination_notes (array of strings). 5) campaign_coordination: array of objects, each with related_campaign (string), coordination_type (string), timing (string), and notes (string)."
      },
      "outputs": {
        "optimal_publishing_time": "extracted_data.optimal_publishing_time",
        "audience_analysis": "extracted_data.audience_analysis",
        "content_sequencing": "extracted_data.content_sequencing",
        "scheduling_plan": "extracted_data.scheduling_plan",
        "campaign_coordination": "extracted_data.campaign_coordination"
      },
      "depends_on": ["prepare_publishing_notes"]
    }
  ],
  "inputs": {
    "user_request": {
      "type": "string",
      "required": true,
      "description": "User's request for publishing workflow"
    },
    "context": {
      "type": "string",
      "default": "",
      "description": "Additional context about the content or publishing requirements"
    },
    "content": {
      "type": "string",
      "default": "",
      "description": "Content to publish"
    }
  },
  "outputs": {
    "content_sections": {
      "type": "list[object]",
      "description": "Content sections status",
      "source": "step.check_content_completeness.content_sections"
    },
    "missing_information": {
      "type": "list[object]",
      "description": "Missing information identified",
      "source": "step.check_content_completeness.missing_information"
    },
    "media_assets": {
      "type": "list[object]",
      "description": "Media assets validation",
      "source": "step.check_content_completeness.media_assets"
    },
    "content_structure": {
      "type": "object",
      "description": "Content structure validation",
      "source": "step.check_content_completeness.content_structure"
    },
    "links_references": {
      "type": "list[object]",
      "description": "Links and references validation",
      "source": "step.check_content_completeness.links_references"
    },
    "format_compliance": {
      "type": "object",
      "description": "Format compliance check",
      "source": "step.validate_format_guidelines.format_compliance"
    },
    "style_guide_compliance": {
      "type": "object",
      "description": "Style guide compliance",
      "source": "step.validate_format_guidelines.style_guide_compliance"
    },
    "brand_guidelines_compliance": {
      "type": "object",
      "description": "Brand guidelines compliance",
      "source": "step.validate_format_guidelines.brand_guidelines_compliance"
    },
    "metadata_validation": {
      "type": "object",
      "description": "Metadata validation",
      "source": "step.validate_format_guidelines.metadata_validation"
    },
    "image_validation": {
      "type": "list[object]",
      "description": "Image validation",
      "source": "step.validate_format_guidelines.image_validation"
    },
    "accessibility_check": {
      "type": "object",
      "description": "Accessibility compliance check",
      "source": "step.validate_format_guidelines.accessibility_check"
    },
    "publishing_checklist": {
      "type": "list[object]",
      "description": "Pre-publishing checklist",
      "source": "step.generate_publishing_checklist.publishing_checklist"
    },
    "required_elements": {
      "type": "list[object]",
      "description": "Required elements checklist",
      "source": "step.generate_publishing_checklist.required_elements"
    },
    "platform_requirements": {
      "type": "list[object]",
      "description": "Platform-specific requirements",
      "source": "step.generate_publishing_checklist.platform_requirements"
    },
    "checklist_summary": {
      "type": "object",
      "description": "Checklist completion summary",
      "source": "step.generate_publishing_checklist.checklist_summary"
    },
    "publishing_notes": {
      "type": "object",
      "description": "Publishing notes and changelog",
      "source": "step.prepare_publishing_notes.publishing_notes"
    },
    "release_notes": {
      "type": "list[object]",
      "description": "Release notes",
      "source": "step.prepare_publishing_notes.release_notes"
    },
    "social_media_drafts": {
      "type": "list[object]",
      "description": "Social media announcement drafts",
      "source": "step.prepare_publishing_notes.social_media_drafts"
    },
    "email_notifications": {
      "type": "list[object]",
      "description": "Email notification drafts",
      "source": "step.prepare_publishing_notes.email_notifications"
    },
    "special_considerations": {
      "type": "list[object]",
      "description": "Special considerations and warnings",
      "source": "step.prepare_publishing_notes.special_considerations"
    },
    "optimal_publishing_time": {
      "type": "object",
      "description": "Optimal publishing time analysis",
      "source": "step.plan_publishing_schedule.optimal_publishing_time"
    },
    "audience_analysis": {
      "type": "object",
      "description": "Audience analysis for scheduling",
      "source": "step.plan_publishing_schedule.audience_analysis"
    },
    "content_sequencing": {
      "type": "list[object]",
      "description": "Content sequencing plan",
      "source": "step.plan_publishing_schedule.content_sequencing"
    },
    "scheduling_plan": {
      "type": "object",
      "description": "Publishing schedule plan",
      "source": "step.plan_publishing_schedule.scheduling_plan"
    },
    "campaign_coordination": {
      "type": "list[object]",
      "description": "Campaign coordination plan",
      "source": "step.plan_publishing_schedule.campaign_coordination"
    }
  }
}

