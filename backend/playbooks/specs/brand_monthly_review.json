{
  "version": "1.0",
  "playbook_code": "brand_monthly_review",
  "kind": "user_workflow",
  "description": "定期檢視品牌產出覆蓋率、一致性，提出改進建議",
  "steps": [
    {
      "id": "collect_brand_outputs",
      "tool": "cloud_capability.call",
      "inputs": {
        "capability": "brand_identity",
        "endpoint": "storyline-coverage/calculate",
        "params": {
          "workspace_id": "{{input.workspace_id}}",
          "month": "{{input.month}}",
          "year": "{{input.year}}"
        }
      },
      "outputs": {
        "brand_outputs": "outputs_data"
      }
    },
    {
      "id": "analyze_coverage",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "{{step.collect_brand_outputs.brand_outputs}}",
        "schema_description": "分析品牌產出覆蓋率和一致性"
      },
      "outputs": {
        "coverage_analysis": "extracted_data"
      },
      "depends_on": ["collect_brand_outputs"]
    },
    {
      "id": "generate_recommendations",
      "tool": "core_llm.generate",
      "inputs": {
        "prompt": "基於覆蓋率分析 {{step.analyze_coverage.coverage_analysis}}，提出改進建議"
      },
      "outputs": {
        "recommendations": "generated_recommendations"
      },
      "depends_on": ["analyze_coverage"]
    }
  ],
  "inputs": {
    "workspace_id": {
      "type": "string",
      "description": "Workspace ID",
      "required": true
    },
    "month": {
      "type": "integer",
      "description": "月份（1-12）",
      "required": false
    },
    "year": {
      "type": "integer",
      "description": "年份",
      "required": false
    }
  },
  "outputs": {
    "coverage_analysis": {
      "type": "object",
      "description": "覆蓋率分析",
      "source": "step.analyze_coverage.coverage_analysis"
    },
    "recommendations": {
      "type": "array",
      "description": "改進建議",
      "source": "step.generate_recommendations.recommendations"
    }
  }
}


