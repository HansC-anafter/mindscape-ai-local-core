{
  "version": "1.0.0",
  "playbook_code": "ig_complete_workflow",
  "kind": "user_workflow",
  "description": "Orchestrate multiple playbooks in sequence to execute end-to-end workflows",
  "steps": [
    {
      "id": "execute_workflow",
      "tool": "ig_complete_workflow_tool",
      "inputs": {
        "action": "execute_workflow",
        "vault_path": "{{input.vault_path}}",
        "workflow_name": "{{input.workflow_name}}",
        "workflow_steps": "{{input.workflow_steps}}",
        "initial_context": "{{input.initial_context}}"
      },
      "outputs": {
        "result": "result"
      },
      "condition": "{{input.action == 'execute_workflow'}}"
    },
    {
      "id": "create_post_workflow",
      "tool": "ig_complete_workflow_tool",
      "inputs": {
        "action": "create_post_workflow",
        "vault_path": "{{input.vault_path}}",
        "post_content": "{{input.post_content}}",
        "post_metadata": "{{input.post_metadata}}",
        "target_folder": "{{input.target_folder}}"
      },
      "outputs": {
        "result": "result"
      },
      "condition": "{{input.action == 'create_post_workflow'}}"
    },
    {
      "id": "review_workflow",
      "tool": "ig_complete_workflow_tool",
      "inputs": {
        "action": "review_workflow",
        "vault_path": "{{input.vault_path}}",
        "post_path": "{{input.post_path}}",
        "review_notes": "{{input.review_notes}}"
      },
      "outputs": {
        "result": "result"
      },
      "condition": "{{input.action == 'review_workflow'}}"
    }
  ],
  "inputs": {
    "action": {
      "type": "string",
      "enum": ["execute_workflow", "create_post_workflow", "review_workflow"],
      "required": true,
      "description": "Action to perform"
    },
    "vault_path": {
      "type": "string",
      "required": true,
      "description": "Path to Obsidian Vault"
    },
    "workflow_name": {
      "type": "string",
      "required": false,
      "description": "Name of the workflow (required for execute_workflow action)"
    },
    "workflow_steps": {
      "type": "array",
      "items": {"type": "object"},
      "required": false,
      "description": "List of workflow steps (required for execute_workflow action)"
    },
    "initial_context": {
      "type": "object",
      "required": false,
      "description": "Initial context variables"
    },
    "post_content": {
      "type": "string",
      "required": false,
      "description": "Post content (required for create_post_workflow action)"
    },
    "post_metadata": {
      "type": "object",
      "required": false,
      "description": "Post metadata/frontmatter (required for create_post_workflow action)"
    },
    "target_folder": {
      "type": "string",
      "required": false,
      "description": "Target folder for post (default: 20-Posts)"
    },
    "post_path": {
      "type": "string",
      "required": false,
      "description": "Path to post file (required for review_workflow action)"
    },
    "review_notes": {
      "type": "array",
      "items": {"type": "object"},
      "required": false,
      "description": "List of review notes"
    }
  },
  "outputs": {
    "result": {
      "type": "object",
      "description": "Workflow execution result with step results and final context",
      "source": "step.execute_workflow.result or step.create_post_workflow.result or step.review_workflow.result"
    }
  }
}

