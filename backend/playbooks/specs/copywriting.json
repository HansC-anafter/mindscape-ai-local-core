{
  "version": "1.0",
  "playbook_code": "copywriting",
  "kind": "user_workflow",
  "steps": [
    {
      "id": "collect_product_info",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "{{input.user_request}}\n\n{{input.context}}\n\nCollect product/service information. Ask user about the product or service they want to promote, identify key features and benefits, understand the unique selling proposition (USP), and collect any existing marketing materials or references.",
        "schema_description": "A JSON object with the following properties: 1) product_service: object with name (string), description (string), category (string), and type (string: 'product', 'service', 'both'). 2) key_features: array of objects, each with feature (string), benefit (string), and importance (string: 'high', 'medium', 'low'). 3) unique_selling_proposition: object with usp (string), differentiators (array of strings), and competitive_advantages (array of strings). 4) existing_materials: array of objects, each with material_type (string), content (string), and relevance (string)."
      },
      "outputs": {
        "product_service": "extracted_data.product_service",
        "key_features": "extracted_data.key_features",
        "unique_selling_proposition": "extracted_data.unique_selling_proposition",
        "existing_materials": "extracted_data.existing_materials"
      }
    },
    {
      "id": "identify_target_audience",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Product/Service: {{step.collect_product_info.product_service}}\n\nKey Features: {{step.collect_product_info.key_features}}\n\nIdentify target audience. Define primary and secondary target audiences, understand audience demographics and psychographics, identify pain points and motivations, and determine preferred communication style.",
        "schema_description": "A JSON object with the following properties: 1) primary_audience: object with demographics (object with age_range, gender, location, income_level, education), psychographics (array of strings), pain_points (array of strings), motivations (array of strings), and communication_style (string). 2) secondary_audience: object with demographics (object), psychographics (array of strings), pain_points (array of strings), motivations (array of strings), and communication_style (string). 3) audience_insights: object with common_needs (array of strings), preferred_channels (array of strings), and messaging_preferences (array of strings)."
      },
      "outputs": {
        "primary_audience": "extracted_data.primary_audience",
        "secondary_audience": "extracted_data.secondary_audience",
        "audience_insights": "extracted_data.audience_insights"
      },
      "depends_on": ["collect_product_info"]
    },
    {
      "id": "define_core_message",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Product/Service: {{step.collect_product_info.product_service}}\n\nUSP: {{step.collect_product_info.unique_selling_proposition}}\n\nTarget Audience: {{step.identify_target_audience.primary_audience}}\n\nDefine core message. Articulate the main value proposition, identify key messages to communicate, determine the emotional appeal, and set the desired tone and voice.",
        "schema_description": "A JSON object with the following properties: 1) value_proposition: object with main_proposition (string), supporting_points (array of strings), and proof_points (array of strings). 2) key_messages: array of objects, each with message (string), purpose (string), and priority (string: 'high', 'medium', 'low'). 3) emotional_appeal: object with primary_emotion (string), secondary_emotions (array of strings), and emotional_triggers (array of strings). 4) tone_and_voice: object with tone (string: 'professional', 'casual', 'friendly', 'authoritative', 'conversational'), voice_characteristics (array of strings), and style_guidelines (array of strings)."
      },
      "outputs": {
        "value_proposition": "extracted_data.value_proposition",
        "key_messages": "extracted_data.key_messages",
        "emotional_appeal": "extracted_data.emotional_appeal",
        "tone_and_voice": "extracted_data.tone_and_voice"
      },
      "depends_on": ["identify_target_audience"]
    },
    {
      "id": "generate_copy_versions",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Value Proposition: {{step.define_core_message.value_proposition}}\n\nKey Messages: {{step.define_core_message.key_messages}}\n\nTone and Voice: {{step.define_core_message.tone_and_voice}}\n\nTarget Audience: {{step.identify_target_audience.primary_audience}}\n\nGenerate multiple copy versions. Create headline variations (3-5 options), generate body copy in different styles, develop CTA options, and produce variations for different channels (if applicable).",
        "schema_description": "A JSON object with the following properties: 1) headline_variations: array of objects, each with headline (string), style (string), appeal_type (string), and test_note (string). 2) body_copy_versions: array of objects, each with version_name (string), copy (string), style (string), length (string), and key_elements (array of strings). 3) cta_options: array of objects, each with cta_text (string), style (string), urgency_level (string: 'high', 'medium', 'low'), and action_type (string). 4) channel_variations: array of objects, each with channel (string: 'social_media', 'email', 'website', 'ad'), headline (string), body_copy (string), and cta (string)."
      },
      "outputs": {
        "headline_variations": "extracted_data.headline_variations",
        "body_copy_versions": "extracted_data.body_copy_versions",
        "cta_options": "extracted_data.cta_options",
        "channel_variations": "extracted_data.channel_variations"
      },
      "depends_on": ["define_core_message"]
    },
    {
      "id": "optimize_tone_expression",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Copy Versions: {{step.generate_copy_versions.headline_variations}}\n\nBody Copy: {{step.generate_copy_versions.body_copy_versions}}\n\nCTAs: {{step.generate_copy_versions.cta_options}}\n\nTarget Audience: {{step.identify_target_audience.primary_audience}}\n\nOptimize tone and expression. Refine copy for clarity and impact, adjust tone to match target audience, enhance persuasive elements, ensure consistency across all versions, and provide recommendations for A/B testing.",
        "schema_description": "A JSON object with the following properties: 1) optimized_headlines: array of objects, each with original (string), optimized (string), improvements (array of strings), and test_recommendation (string). 2) optimized_body_copy: array of objects, each with version_name (string), original (string), optimized (string), improvements (array of strings), and clarity_score (string: 'high', 'medium', 'low'). 3) optimized_ctas: array of objects, each with original (string), optimized (string), improvements (array of strings), and conversion_potential (string: 'high', 'medium', 'low'). 4) consistency_check: object with tone_consistency (string: 'high', 'medium', 'low'), style_consistency (string: 'high', 'medium', 'low'), and issues (array of strings). 5) ab_testing_recommendations: array of objects, each with test_element (string), variants (array of strings), hypothesis (string), and success_metric (string)."
      },
      "outputs": {
        "optimized_headlines": "extracted_data.optimized_headlines",
        "optimized_body_copy": "extracted_data.optimized_body_copy",
        "optimized_ctas": "extracted_data.optimized_ctas",
        "consistency_check": "extracted_data.consistency_check",
        "ab_testing_recommendations": "extracted_data.ab_testing_recommendations"
      },
      "depends_on": ["generate_copy_versions"]
    }
  ],
  "inputs": {
    "user_request": {
      "type": "string",
      "required": true,
      "description": "User's request for copywriting"
    },
    "context": {
      "type": "string",
      "default": "",
      "description": "Additional context about the product, service, or campaign"
    }
  },
  "outputs": {
    "product_service": {
      "type": "object",
      "description": "Product or service information",
      "source": "step.collect_product_info.product_service"
    },
    "key_features": {
      "type": "list[object]",
      "description": "Key features and benefits",
      "source": "step.collect_product_info.key_features"
    },
    "unique_selling_proposition": {
      "type": "object",
      "description": "Unique selling proposition",
      "source": "step.collect_product_info.unique_selling_proposition"
    },
    "existing_materials": {
      "type": "list[object]",
      "description": "Existing marketing materials",
      "source": "step.collect_product_info.existing_materials"
    },
    "primary_audience": {
      "type": "object",
      "description": "Primary target audience",
      "source": "step.identify_target_audience.primary_audience"
    },
    "secondary_audience": {
      "type": "object",
      "description": "Secondary target audience",
      "source": "step.identify_target_audience.secondary_audience"
    },
    "audience_insights": {
      "type": "object",
      "description": "Audience insights",
      "source": "step.identify_target_audience.audience_insights"
    },
    "value_proposition": {
      "type": "object",
      "description": "Value proposition",
      "source": "step.define_core_message.value_proposition"
    },
    "key_messages": {
      "type": "list[object]",
      "description": "Key messages to communicate",
      "source": "step.define_core_message.key_messages"
    },
    "emotional_appeal": {
      "type": "object",
      "description": "Emotional appeal strategy",
      "source": "step.define_core_message.emotional_appeal"
    },
    "tone_and_voice": {
      "type": "object",
      "description": "Tone and voice guidelines",
      "source": "step.define_core_message.tone_and_voice"
    },
    "headline_variations": {
      "type": "list[object]",
      "description": "Headline variations",
      "source": "step.generate_copy_versions.headline_variations"
    },
    "body_copy_versions": {
      "type": "list[object]",
      "description": "Body copy versions",
      "source": "step.generate_copy_versions.body_copy_versions"
    },
    "cta_options": {
      "type": "list[object]",
      "description": "Call-to-action options",
      "source": "step.generate_copy_versions.cta_options"
    },
    "channel_variations": {
      "type": "list[object]",
      "description": "Channel-specific variations",
      "source": "step.generate_copy_versions.channel_variations"
    },
    "optimized_headlines": {
      "type": "list[object]",
      "description": "Optimized headline versions",
      "source": "step.optimize_tone_expression.optimized_headlines"
    },
    "optimized_body_copy": {
      "type": "list[object]",
      "description": "Optimized body copy versions",
      "source": "step.optimize_tone_expression.optimized_body_copy"
    },
    "optimized_ctas": {
      "type": "list[object]",
      "description": "Optimized CTA versions",
      "source": "step.optimize_tone_expression.optimized_ctas"
    },
    "consistency_check": {
      "type": "object",
      "description": "Consistency check results",
      "source": "step.optimize_tone_expression.consistency_check"
    },
    "ab_testing_recommendations": {
      "type": "list[object]",
      "description": "A/B testing recommendations",
      "source": "step.optimize_tone_expression.ab_testing_recommendations"
    }
  }
}

