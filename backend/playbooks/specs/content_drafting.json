{
  "version": "1.0",
  "playbook_code": "content_drafting",
  "kind": "user_workflow",
  "steps": [
    {
      "id": "understand_requirements",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "{{input.user_request}}\n\n{{input.context}}\n\nUnderstand content requirements. Ask about target audience and purpose, understand content type and format requirements, and collect key information and points.",
        "schema_description": "A JSON object with the following properties: 1) target_audience: object with audience_type (string), characteristics (array of strings), and preferences (array of strings). 2) content_purpose: string (the main purpose of the content). 3) content_type: string (e.g., 'article', 'post', 'fundraising_page', 'copy'). 4) format_requirements: object with length (string), structure (string), and style_guidelines (array of strings). 5) key_points: array of strings (main points to cover)."
      },
      "outputs": {
        "target_audience": "extracted_data.target_audience",
        "content_purpose": "extracted_data.content_purpose",
        "content_type": "extracted_data.content_type",
        "format_requirements": "extracted_data.format_requirements",
        "key_points": "extracted_data.key_points"
      }
    },
    {
      "id": "design_structure",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Target Audience: {{step.understand_requirements.target_audience}}\n\nContent Purpose: {{step.understand_requirements.content_purpose}}\n\nKey Points: {{step.understand_requirements.key_points}}\n\nDesign content structure. Design overall content architecture (opening, body, conclusion), plan the focus and function of each section, and determine narrative logic and flow.",
        "schema_description": "A JSON object with the following properties: 1) overall_structure: object with opening (object with purpose and key_elements), body (array of section objects, each with section_name, purpose, key_points, and order), and conclusion (object with purpose and key_elements). 2) narrative_flow: string (description of the narrative logic). 3) section_plan: array of objects, each with section_name (string), purpose (string), key_content (array of strings), and estimated_length (string)."
      },
      "outputs": {
        "overall_structure": "extracted_data.overall_structure",
        "narrative_flow": "extracted_data.narrative_flow",
        "section_plan": "extracted_data.section_plan"
      },
      "depends_on": ["understand_requirements"]
    },
    {
      "id": "draft_content",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Content Structure: {{step.design_structure.overall_structure}}\n\nSection Plan: {{step.design_structure.section_plan}}\n\nKey Points: {{step.understand_requirements.key_points}}\n\nDraft content. Draft specific content for each section, ensure content matches target audience's language habits, and maintain consistent tone and style.",
        "schema_description": "A JSON object with the following properties: 1) draft_content: object with opening (string), body (array of section objects, each with section_name, content, and word_count), and conclusion (string). 2) tone_and_style: object with tone (string), style_characteristics (array of strings), and language_level (string). 3) word_count: object with total (integer), opening (integer), body (integer), and conclusion (integer)."
      },
      "outputs": {
        "draft_content": "extracted_data.draft_content",
        "tone_and_style": "extracted_data.tone_and_style",
        "word_count": "extracted_data.word_count"
      },
      "depends_on": ["design_structure"]
    },
    {
      "id": "optimize_suggestions",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Draft Content: {{step.draft_content.draft_content}}\n\nTone and Style: {{step.draft_content.tone_and_style}}\n\nTarget Audience: {{step.understand_requirements.target_audience}}\n\nProvide optimization suggestions. Provide tone and style adjustment suggestions, suggest key paragraphs that can be strengthened, and provide polishing and optimization directions.",
        "schema_description": "A JSON object with the following properties: 1) tone_suggestions: array of objects, each with section (string), current_tone (string), suggested_tone (string), and reason (string). 2) strengthening_suggestions: array of objects, each with section (string), current_content (string), suggested_improvement (string), and impact (string). 3) optimization_directions: array of objects, each with area (string), suggestion (string), and priority (string: 'high', 'medium', 'low'). 4) final_recommendations: array of strings (key recommendations for improvement)."
      },
      "outputs": {
        "tone_suggestions": "extracted_data.tone_suggestions",
        "strengthening_suggestions": "extracted_data.strengthening_suggestions",
        "optimization_directions": "extracted_data.optimization_directions",
        "final_recommendations": "extracted_data.final_recommendations"
      },
      "depends_on": ["draft_content"]
    }
  ],
  "inputs": {
    "user_request": {
      "type": "string",
      "required": true,
      "description": "User's request for content drafting"
    },
    "context": {
      "type": "string",
      "default": "",
      "description": "Additional context about the content or requirements"
    }
  },
  "outputs": {
    "target_audience": {
      "type": "object",
      "description": "Target audience analysis",
      "source": "step.understand_requirements.target_audience"
    },
    "content_purpose": {
      "type": "string",
      "description": "Content purpose",
      "source": "step.understand_requirements.content_purpose"
    },
    "content_type": {
      "type": "string",
      "description": "Content type",
      "source": "step.understand_requirements.content_type"
    },
    "format_requirements": {
      "type": "object",
      "description": "Format requirements",
      "source": "step.understand_requirements.format_requirements"
    },
    "key_points": {
      "type": "list[string]",
      "description": "Key points to cover",
      "source": "step.understand_requirements.key_points"
    },
    "overall_structure": {
      "type": "object",
      "description": "Overall content structure",
      "source": "step.design_structure.overall_structure"
    },
    "narrative_flow": {
      "type": "string",
      "description": "Narrative flow description",
      "source": "step.design_structure.narrative_flow"
    },
    "section_plan": {
      "type": "list[object]",
      "description": "Section plan",
      "source": "step.design_structure.section_plan"
    },
    "draft_content": {
      "type": "object",
      "description": "Drafted content",
      "source": "step.draft_content.draft_content"
    },
    "tone_and_style": {
      "type": "object",
      "description": "Tone and style information",
      "source": "step.draft_content.tone_and_style"
    },
    "word_count": {
      "type": "object",
      "description": "Word count breakdown",
      "source": "step.draft_content.word_count"
    },
    "tone_suggestions": {
      "type": "list[object]",
      "description": "Tone adjustment suggestions",
      "source": "step.optimize_suggestions.tone_suggestions"
    },
    "strengthening_suggestions": {
      "type": "list[object]",
      "description": "Content strengthening suggestions",
      "source": "step.optimize_suggestions.strengthening_suggestions"
    },
    "optimization_directions": {
      "type": "list[object]",
      "description": "Optimization directions",
      "source": "step.optimize_suggestions.optimization_directions"
    },
    "final_recommendations": {
      "type": "list[string]",
      "description": "Final recommendations for improvement",
      "source": "step.optimize_suggestions.final_recommendations"
    }
  }
}

