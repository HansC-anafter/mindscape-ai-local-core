{
  "version": "1.0",
  "playbook_code": "technical_documentation",
  "kind": "user_workflow",
  "steps": [
    {
      "id": "analyze_code_structure_functionality",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "{{input.user_request}}\n\n{{input.context}}\n\n{{input.code}}\n\nAnalyze code structure and functionality. Extract code from files or receive code input, analyze overall code architecture and organization, identify modules, classes, and functions, understand code functionality and purpose, and map dependencies and relationships.",
        "schema_description": "A JSON object with the following properties: 1) code_architecture: object with overall_structure (string), organization_type (string), and architecture_patterns (array of strings). 2) modules: array of objects, each with module_name (string), description (string), classes (array of class names), functions (array of function names), and dependencies (array of module names). 3) classes: array of objects, each with class_name (string), module (string), description (string), methods (array of method names), and inheritance (string if applicable). 4) functions: array of objects, each with function_name (string), module (string), description (string), and purpose (string). 5) dependencies: array of objects, each with dependency_type (string: 'module', 'class', 'function'), from (string), to (string), and relationship (string)."
      },
      "outputs": {
        "code_architecture": "extracted_data.code_architecture",
        "modules": "extracted_data.modules",
        "classes": "extracted_data.classes",
        "functions": "extracted_data.functions",
        "dependencies": "extracted_data.dependencies"
      }
    },
    {
      "id": "extract_api_function_descriptions",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Code: {{input.code}}\n\nFunctions: {{step.analyze_code_structure_functionality.functions}}\n\nClasses: {{step.analyze_code_structure_functionality.classes}}\n\nExtract API and function descriptions. Extract function signatures and parameters, identify API endpoints and methods, extract class and module descriptions, document input/output types and formats, and note any configuration or setup requirements.",
        "schema_description": "A JSON object with the following properties: 1) api_endpoints: array of objects, each with endpoint (string), method (string: 'GET', 'POST', 'PUT', 'DELETE', etc.), description (string), parameters (array of parameter objects), response_type (string), and authentication_required (boolean). 2) function_signatures: array of objects, each with function_name (string), signature (string), parameters (array of parameter objects, each with name, type, description, required), return_type (string), return_description (string), and exceptions (array of exception types). 3) class_descriptions: array of objects, each with class_name (string), description (string), methods (array of method objects), properties (array of property objects), and inheritance (string). 4) module_descriptions: array of objects, each with module_name (string), description (string), purpose (string), and exports (array of exported items). 5) configuration_requirements: array of objects, each with requirement (string), description (string), type (string), and default_value (string if available)."
      },
      "outputs": {
        "api_endpoints": "extracted_data.api_endpoints",
        "function_signatures": "extracted_data.function_signatures",
        "class_descriptions": "extracted_data.class_descriptions",
        "module_descriptions": "extracted_data.module_descriptions",
        "configuration_requirements": "extracted_data.configuration_requirements"
      },
      "depends_on": ["analyze_code_structure_functionality"]
    },
    {
      "id": "generate_documentation_structure",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Code Architecture: {{step.analyze_code_structure_functionality.code_architecture}}\n\nModules: {{step.analyze_code_structure_functionality.modules}}\n\nAPI Endpoints: {{step.extract_api_function_descriptions.api_endpoints}}\n\nGenerate documentation structure. Design documentation hierarchy, create sections for overview, API reference, examples, etc., organize content by modules or features, plan navigation and cross-references, and define documentation format and style.",
        "schema_description": "A JSON object with the following properties: 1) documentation_hierarchy: array of objects, each with section_name (string), level (integer), description (string), subsections (array of subsection objects), and content_type (string: 'overview', 'api_reference', 'examples', 'tutorial', 'configuration', 'troubleshooting'). 2) sections: array of objects, each with section_name (string), purpose (string), content_outline (array of strings), and order (integer). 3) navigation_structure: array of objects, each with nav_item (string), path (string), children (array of child nav items), and order (integer). 4) cross_references: array of objects, each with from_section (string), to_section (string), reference_type (string), and description (string). 5) documentation_format: object with format_type (string: 'markdown', 'html', 'rst', 'asciidoc'), style_guide (array of strings), and conventions (array of strings)."
      },
      "outputs": {
        "documentation_hierarchy": "extracted_data.documentation_hierarchy",
        "sections": "extracted_data.sections",
        "navigation_structure": "extracted_data.navigation_structure",
        "cross_references": "extracted_data.cross_references",
        "documentation_format": "extracted_data.documentation_format"
      },
      "depends_on": ["extract_api_function_descriptions"]
    },
    {
      "id": "write_usage_examples",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "API Endpoints: {{step.extract_api_function_descriptions.api_endpoints}}\n\nFunction Signatures: {{step.extract_api_function_descriptions.function_signatures}}\n\nClasses: {{step.extract_api_function_descriptions.class_descriptions}}\n\nWrite usage examples. Create practical usage examples for each API/function, include common use cases and scenarios, provide code snippets and demonstrations, show error handling and edge cases, and include integration examples if applicable.",
        "schema_description": "A JSON object with the following properties: 1) api_examples: array of objects, each with endpoint (string), example_name (string), use_case (string), code_snippet (string), expected_response (string), and notes (string). 2) function_examples: array of objects, each with function_name (string), example_name (string), use_case (string), code_snippet (string), expected_output (string), and notes (string). 3) class_examples: array of objects, each with class_name (string), example_name (string), use_case (string), code_snippet (string), expected_behavior (string), and notes (string). 4) common_use_cases: array of objects, each with use_case_name (string), description (string), related_apis (array of strings), code_example (string), and scenario (string). 5) error_handling_examples: array of objects, each with example_name (string), error_type (string), code_snippet (string), error_message (string), and handling_approach (string). 6) integration_examples: array of objects, each with integration_name (string), description (string), code_snippet (string), and dependencies (array of strings)."
      },
      "outputs": {
        "api_examples": "extracted_data.api_examples",
        "function_examples": "extracted_data.function_examples",
        "class_examples": "extracted_data.class_examples",
        "common_use_cases": "extracted_data.common_use_cases",
        "error_handling_examples": "extracted_data.error_handling_examples",
        "integration_examples": "extracted_data.integration_examples"
      },
      "depends_on": ["extract_api_function_descriptions"]
    },
    {
      "id": "generate_complete_documentation",
      "tool": "core_llm.structured_extract",
      "inputs": {
        "text": "Documentation Structure: {{step.generate_documentation_structure.documentation_hierarchy}}\n\nAPI Descriptions: {{step.extract_api_function_descriptions.api_endpoints}}\n\nUsage Examples: {{step.write_usage_examples.api_examples}}\n\nGenerate complete documentation. Compile all documentation sections and create comprehensive technical documentation with overview and introduction, installation and setup guide, API reference documentation, usage examples and tutorials, configuration and customization, and troubleshooting and FAQ.",
        "schema_description": "A JSON object with the following properties: 1) overview: object with introduction (string), purpose (string), key_features (array of strings), and architecture_overview (string). 2) installation_setup: object with installation_steps (array of step objects), requirements (array of strings), configuration (array of configuration objects), and verification (array of strings). 3) api_reference: object with api_overview (string), endpoints (array of endpoint documentation objects), functions (array of function documentation objects), and classes (array of class documentation objects). 4) usage_examples: object with getting_started (array of example objects), common_use_cases (array of use case objects), advanced_examples (array of example objects), and integration_guides (array of integration objects). 5) configuration: object with configuration_options (array of option objects), customization_guide (string), and best_practices (array of strings). 6) troubleshooting: object with common_issues (array of issue objects), faq (array of faq objects), and support_resources (array of strings)."
      },
      "outputs": {
        "overview": "extracted_data.overview",
        "installation_setup": "extracted_data.installation_setup",
        "api_reference": "extracted_data.api_reference",
        "usage_examples": "extracted_data.usage_examples",
        "configuration": "extracted_data.configuration",
        "troubleshooting": "extracted_data.troubleshooting"
      },
      "depends_on": ["write_usage_examples", "generate_documentation_structure"]
    }
  ],
  "inputs": {
    "user_request": {
      "type": "string",
      "required": true,
      "description": "User's request for technical documentation"
    },
    "context": {
      "type": "string",
      "default": "",
      "description": "Additional context about the code or documentation requirements"
    },
    "code": {
      "type": "string",
      "required": true,
      "description": "Code to document"
    }
  },
  "outputs": {
    "code_architecture": {
      "type": "object",
      "description": "Code architecture analysis",
      "source": "step.analyze_code_structure_functionality.code_architecture"
    },
    "modules": {
      "type": "list[object]",
      "description": "Code modules identified",
      "source": "step.analyze_code_structure_functionality.modules"
    },
    "classes": {
      "type": "list[object]",
      "description": "Classes identified",
      "source": "step.analyze_code_structure_functionality.classes"
    },
    "functions": {
      "type": "list[object]",
      "description": "Functions identified",
      "source": "step.analyze_code_structure_functionality.functions"
    },
    "dependencies": {
      "type": "list[object]",
      "description": "Code dependencies",
      "source": "step.analyze_code_structure_functionality.dependencies"
    },
    "api_endpoints": {
      "type": "list[object]",
      "description": "API endpoints identified",
      "source": "step.extract_api_function_descriptions.api_endpoints"
    },
    "function_signatures": {
      "type": "list[object]",
      "description": "Function signatures and parameters",
      "source": "step.extract_api_function_descriptions.function_signatures"
    },
    "class_descriptions": {
      "type": "list[object]",
      "description": "Class descriptions",
      "source": "step.extract_api_function_descriptions.class_descriptions"
    },
    "module_descriptions": {
      "type": "list[object]",
      "description": "Module descriptions",
      "source": "step.extract_api_function_descriptions.module_descriptions"
    },
    "configuration_requirements": {
      "type": "list[object]",
      "description": "Configuration requirements",
      "source": "step.extract_api_function_descriptions.configuration_requirements"
    },
    "documentation_hierarchy": {
      "type": "list[object]",
      "description": "Documentation hierarchy",
      "source": "step.generate_documentation_structure.documentation_hierarchy"
    },
    "sections": {
      "type": "list[object]",
      "description": "Documentation sections",
      "source": "step.generate_documentation_structure.sections"
    },
    "navigation_structure": {
      "type": "list[object]",
      "description": "Navigation structure",
      "source": "step.generate_documentation_structure.navigation_structure"
    },
    "cross_references": {
      "type": "list[object]",
      "description": "Cross-references between sections",
      "source": "step.generate_documentation_structure.cross_references"
    },
    "documentation_format": {
      "type": "object",
      "description": "Documentation format and style",
      "source": "step.generate_documentation_structure.documentation_format"
    },
    "api_examples": {
      "type": "list[object]",
      "description": "API usage examples",
      "source": "step.write_usage_examples.api_examples"
    },
    "function_examples": {
      "type": "list[object]",
      "description": "Function usage examples",
      "source": "step.write_usage_examples.function_examples"
    },
    "class_examples": {
      "type": "list[object]",
      "description": "Class usage examples",
      "source": "step.write_usage_examples.class_examples"
    },
    "common_use_cases": {
      "type": "list[object]",
      "description": "Common use cases",
      "source": "step.write_usage_examples.common_use_cases"
    },
    "error_handling_examples": {
      "type": "list[object]",
      "description": "Error handling examples",
      "source": "step.write_usage_examples.error_handling_examples"
    },
    "integration_examples": {
      "type": "list[object]",
      "description": "Integration examples",
      "source": "step.write_usage_examples.integration_examples"
    },
    "overview": {
      "type": "object",
      "description": "Documentation overview and introduction",
      "source": "step.generate_complete_documentation.overview"
    },
    "installation_setup": {
      "type": "object",
      "description": "Installation and setup guide",
      "source": "step.generate_complete_documentation.installation_setup"
    },
    "api_reference": {
      "type": "object",
      "description": "API reference documentation",
      "source": "step.generate_complete_documentation.api_reference"
    },
    "usage_examples": {
      "type": "object",
      "description": "Usage examples and tutorials",
      "source": "step.generate_complete_documentation.usage_examples"
    },
    "configuration": {
      "type": "object",
      "description": "Configuration and customization guide",
      "source": "step.generate_complete_documentation.configuration"
    },
    "troubleshooting": {
      "type": "object",
      "description": "Troubleshooting and FAQ",
      "source": "step.generate_complete_documentation.troubleshooting"
    }
  }
}

